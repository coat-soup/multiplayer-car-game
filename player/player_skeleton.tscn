[gd_scene load_steps=8 format=3 uid="uid://dhhtqn4mah1gr"]

[ext_resource type="PackedScene" uid="uid://b58mng7dppykp" path="res://player/player.glb" id="1_8uaxt"]
[ext_resource type="Script" uid="uid://cyau5po7j4go7" path="res://player/player_skeleton_controller.gd" id="2_kehbc"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_omsbg"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cixkc"]
animation = &"Walk"
use_custom_timeline = true
timeline_length = 0.45
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_85jfa"]
animation = &"Run"
use_custom_timeline = true
timeline_length = 0.5
stretch_time_scale = true
start_offset = 0.0
loop_mode = 1

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_iqfnt"]
blend_point_0/node = SubResource("AnimationNodeAnimation_omsbg")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_cixkc")
blend_point_1/pos = 0.5
blend_point_2/node = SubResource("AnimationNodeAnimation_85jfa")
blend_point_2/pos = 1.0
min_space = 0.0

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_0ew0c"]
nodes/walk_velocity/node = SubResource("AnimationNodeBlendSpace1D_iqfnt")
nodes/walk_velocity/position = Vector2(0, 120)
node_connections = [&"output", 0, &"walk_velocity"]

[node name="PlayerSkeleton" node_paths=PackedStringArray("right_arm_ik", "left_arm_ik") instance=ExtResource("1_8uaxt")]
script = ExtResource("2_kehbc")
right_arm_ik = [NodePath("Armature_001/Skeleton3D/UpperArmIK_R"), NodePath("Armature_001/Skeleton3D/LowerArmIK_R"), NodePath("Armature_001/Skeleton3D/HandIK_R")]
left_arm_ik = [NodePath("Armature_001/Skeleton3D/UpperArmIK_L"), NodePath("Armature_001/Skeleton3D/LowerArmIK_L"), NodePath("Armature_001/Skeleton3D/HandIK_L")]

[node name="Skeleton3D" parent="Armature_001" index="0"]
bones/0/position = Vector3(1.58819e-22, 0.884602, -0.0355277)
bones/1/rotation = Quaternion(-3.55271e-15, 1.77636e-14, -4.03897e-28, 1)
bones/2/rotation = Quaternion(0.00288137, 3.59366e-15, 6.86971e-10, 0.999996)
bones/3/rotation = Quaternion(-0.00288137, -3.51158e-15, -6.86971e-10, 0.999996)
bones/4/rotation = Quaternion(-2.32831e-10, -1.06581e-14, -5.5512e-17, 1)
bones/6/rotation = Quaternion(-0.0300407, 0.0166983, -0.451362, 0.891679)
bones/7/rotation = Quaternion(0.146264, -0.00677706, -0.0960762, 0.984546)
bones/9/rotation = Quaternion(0.0751256, -0.0160502, -0.0510486, 0.995737)
bones/12/rotation = Quaternion(-0.0161913, -0.0230147, 0.452071, 0.891538)
bones/13/rotation = Quaternion(0.147057, 0.0357436, 0.0948569, 0.98392)
bones/15/rotation = Quaternion(0.0776303, -0.0187576, 0.0471524, 0.99569)
bones/17/rotation = Quaternion(0.00255318, 0.0250394, 0.999517, -0.0182174)
bones/18/rotation = Quaternion(-0.114062, 0.000514554, -0.0111284, 0.993411)
bones/19/rotation = Quaternion(0.764245, -0.0520806, 0.0528547, 0.640643)
bones/20/rotation = Quaternion(-0.00056282, 0.00332745, 0.0180392, 0.999832)
bones/21/rotation = Quaternion(-0.00257308, 0.0249576, 0.999505, 0.018984)
bones/22/rotation = Quaternion(-0.11399, 0.00497029, 0.011826, 0.993399)
bones/23/rotation = Quaternion(0.76499, 0.0626617, -0.0406742, 0.639695)
bones/24/rotation = Quaternion(-4.24653e-05, -0.00694891, -0.018048, 0.999813)
bones/25/position = Vector3(0.153415, 0.0372633, -0.103784)
bones/25/rotation = Quaternion(0.00479742, -0.707091, 0.707091, -0.00479742)
bones/26/position = Vector3(-0.153415, 0.0372633, -0.103784)
bones/26/rotation = Quaternion(0.00458585, 0.707092, -0.707092, -0.00458585)
bones/27/rotation = Quaternion(-0.0126777, 0.706993, 0.706993, -0.0126777)
bones/30/position = Vector3(-0.337047, 0.951551, 0.0184339)

[node name="Hair01_001" parent="Armature_001/Skeleton3D" index="11"]
visible = false

[node name="TorsoIK" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="12"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0925, 0)
target_node = NodePath("TorsoTarget")
bone_name = "TorsoLower"
bone = 1
primary_rotation_axis = 0

[node name="TorsoTarget" type="Marker3D" parent="Armature_001/Skeleton3D/TorsoIK" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.626743)

[node name="UpperArmIK_R" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="13"]
active = false
target_node = NodePath("../../../HandTarget_R/LowerArmTarget_R/UpperArmTarget_R")
bone_name = "ArmUpper.R"
bone = 12
forward_axis = 2
primary_rotation_axis = 0

[node name="LowerArmIK_R" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="14"]
active = false
target_node = NodePath("../../../HandTarget_R/LowerArmTarget_R")
bone_name = "ArmLower.R"
bone = 13
forward_axis = 2
primary_rotation_axis = 0

[node name="HandIK_R" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="15"]
active = false
target_node = NodePath("../../../HandTarget_R")
bone_name = "Hand.R"
bone = 14
forward_axis = 2
primary_rotation_axis = 0

[node name="UpperArmIK_L" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="16"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.264974, 1.17499, 0.329156)
active = false
target_node = NodePath("../../../HandTarget_L/LowerArmTarget_L/UpperArmTarget_L")
bone_name = "ArmUpper.L"
bone = 6
forward_axis = 2
primary_rotation_axis = 0

[node name="LowerArmIK_L" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="17"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.264974, 1.17499, 0.329156)
active = false
target_node = NodePath("../../../HandTarget_L/LowerArmTarget_L")
bone_name = "ArmLower.L"
bone = 7
forward_axis = 2
primary_rotation_axis = 0

[node name="HandIK_L" type="LookAtModifier3D" parent="Armature_001/Skeleton3D" index="18"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.264974, 1.17499, 0.329156)
active = false
target_node = NodePath("../../../HandTarget_L")
bone_name = "Hand.L"
bone = 8
forward_axis = 2
primary_rotation_axis = 0

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_0ew0c")
anim_player = NodePath("../AnimationPlayer")
parameters/walk_velocity/blend_position = 0.342338

[node name="HandTarget_R" type="Marker3D" parent="." index="3"]
transform = Transform3D(0.704187, 0.502329, 0.501782, -0.679577, 0.681555, 0.271401, -0.20566, -0.532117, 0.821314, -0.380243, 1.58945, 0.562232)

[node name="LowerArmTarget_R" type="Marker3D" parent="HandTarget_R" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0060913)

[node name="UpperArmTarget_R" type="Marker3D" parent="HandTarget_R/LowerArmTarget_R" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.453691)

[node name="HandTarget_L" type="Marker3D" parent="." index="4"]
transform = Transform3D(0.132173, 0.886537, -0.443375, -0.988565, 0.150651, 0.0065303, 0.0725842, 0.437443, 0.896312, 0.229695, 1.40549, 0.564524)

[node name="LowerArmTarget_L" type="Marker3D" parent="HandTarget_L" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0060913)

[node name="UpperArmTarget_L" type="Marker3D" parent="HandTarget_L/LowerArmTarget_L" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.453691)
